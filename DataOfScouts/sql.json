SELECT r.EVENTID, r.PARTICIPANT_ID, r.PARTICIPANT_NAME, r.TEAMTYPE, sum(case when r.INCIDENT_NAME= 'Goal' or r.INCIDENT_ID= 421 then 1 else 0 end ) as Goal, r.TEAMTYPE,sum(case when r.INCIDENT_NAME= 'Yellow card' then 1 else 0 end ) as Yellow card, r.TEAMTYPE,sum(case when r.INCIDENT_NAME= 'Red card' then 1 else 0 end ) as Red card r.TEAMTYPE,sum(case when r.INCIDENT_NAME= 'Substitution in' then 1 else 0 end ) as Substitution FROM INCIDENTS r where r.EVENTID='2439656' and r.TEAMTYPE !='' GROUP BY r.EVENTID, r.TEAMTYPE, r.PARTICIPANT_ID, r.PARTICIPANT_NAME update teams t set t.GENDER = case when t.MAPPING_STATUS is null then false else true end -- Instruct flamerobin to use # as the terminator SET TERM ^; EXECUTE BLOCK RETURNS (col1 INTEGER, col2 VARCHAR(100)) AS DECLARE customerID INT = 142531; BEGIN FOR SELECT t.id, t.NAME FROM TEAMS t WHERE t.id > :customerID INTO :col1, :col2 DO SUSPEND; END^ -- Restore terminator to ; SET TERM ;^

-- Instruct flamerobin to use # as the terminator
SET TERM ^;
EXECUTE BLOCK 
   RETURNS (col1 INTEGER, col2 VARCHAR(100))
AS
DECLARE customerID INT = 142531;

BEGIN
  FOR SELECT t.id, t.NAME FROM TEAMS t  WHERE t.id > :customerID INTO :col1, :col2
  DO
     SUSPEND;
END^
-- Restore terminator to ;
SET TERM ;^


SET TERM ^;
EXECUTE BLOCK 
   RETURNS (HOSTID1  VARCHAR(100),hkjchName1  VARCHAR(100) ,hkjchname_cn1  VARCHAR(100),hkjchid1  VARCHAR(100))
AS
DECLARE VARIABLE SubStr VARCHAR(100);  
DECLARE VARIABLE home VARCHAR(100);   
DECLARE VARIABLE guest VARCHAR(100);   
DECLARE VARIABLE Tmp VARCHAR(100);
DECLARE VARIABLE IPOS integer; 
DECLARE VARIABLE IPOS2 integer; 
DECLARE VARIABLE HOSTID integer; 
DECLARE VARIABLE hkjchName VARCHAR(100);  
DECLARE VARIABLE hkjchname_cn VARCHAR(100);  
DECLARE VARIABLE hkjchid VARCHAR(100);  

DECLARE VARIABLE GUESTID integer ; 
DECLARE VARIABLE   icount integer; 
DECLARE i INT = 2;
DECLARE j INT = 0;
BEGIN
  
  home='142534/Poland U20/波蘭U20/949';
  guest='142532/Poland U21/波蘭U21/941';
   WHILE ( j<i) DO BEGIN
  j=j+1;
  Tmp = '';  IPOS=0;  IPOS2=0;  icount=0;
 IF (HOME IS NULL )   
  THEN BEGIN HOSTID = null;hkjchName = null;hkjchname_cn = null;hkjchid = null; EXIT; END
   if(j=1) then 
     begin      SubStr = HOME;     end      else 
     begin      SubStr = guest;     end 
   WHILE (SubStr  not LIKE '') DO BEGIN
   IPOS =position('/',   SubStr ); 
   Tmp=substring(SubStr FROM 1 FOR ipos -1);
    IPOS2=IPOS2+ipos;
    if(j=1) then 
    begin
    SubStr=substring(HOME FROM IPOS2 FOR char_length( HOME) -IPOS2+1 ) ;      end      else 
     begin      SubStr=substring(guest FROM IPOS2 FOR char_length( guest) -IPOS2+1 ) ;      end
      
     icount=icount +1;
     IF(icount=1) then
     HOSTID= cast (Tmp as integer);
      else IF(icount=2) then
      hkjchName=  Tmp  ; 
       else IF(icount=3) then
      hkjchName=  Tmp  ; 
          else IF(icount=4) then
      hkjchname_cn=  Tmp  ;  
   
      if(icount>3) then
      break;
    
   END 

FOR SELECT :HOSTID a,:hkjchname b,:hkjchname_cn c,:SubStr d  FROM TEAMS t  WHERE t.id  = 137165 INTO :HOSTID1,:hkjchName1,:hkjchname_cn1,:hkjchid1
  DO
     SUSPEND; 
     end 
  
END^ 
SET TERM ;^